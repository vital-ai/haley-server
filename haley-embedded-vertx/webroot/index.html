<html>
<head>
  <title></title>
  
  
<link href="scripts/css/bootstrap.css" rel="stylesheet">
<link href="scripts/css/bootstrap3/bootstrap-switch.css" rel="stylesheet">
<script src="scripts/jquery.js"></script>
<script src="scripts/js/bootstrap-switch.js"></script>
  
</head>

<style>
  
</style>

<body>

Haley Internet of Things Control Panel<br>


<div>
<form>Wemo Outlet1: 
<input type="checkbox" name="my-checkbox">
</form>
</div>


<script>

// need to check status first to determine state of switch
// for each device found, produce a switch, and autosize the control panel


$.fn.bootstrapSwitch.defaults.size = 'large';
$.fn.bootstrapSwitch.defaults.onColor = 'success';

$("[name='my-checkbox']").bootstrapSwitch();

$('input[name="my-checkbox"]').on('switchChange.bootstrapSwitch', function(event, state) {
	  console.log(this); // DOM element
	  console.log(event); // jQuery event
	  console.log(state); // true | false
	  
	  if(state == true) {
		  
		  doTurnOnDevice();
	  }
	  
	  
	  if(state == false) {
		
		  doTurnOffDevice();
		  
	  }
	  
	});

</script>
<!--  
<form>

<input id="turnOn" type="button" value="turnOn" onclick="doTurnOnDevice();" />


<input id="turnOff" type="button" value="turnOff" onclick="doTurnOffDevice();" />

</form>

-->

<iframe src="https://haley-ai-web.vital.ai" style="position:absolute; bottom:0px; height:90%; width:100%;" frameborder="0"></iframe>




<!--  
<script>

var xhr = new XMLHttpRequest();
xhr.open("GET", "//devices", false);
xhr.send();

console.log(xhr.status);
console.log(xhr.statusText);
console.log(xhr.responseText);

</script>
-->

<script>

function handler() {
	
	console.log("done!");
	
	
	
}

function doTurnOnDevice() {
	
	xmlhttp = new XMLHttpRequest();
	var url =  window.location.href + "/devices/Outlet1/on";
	xmlhttp.open("POST", url, true);
	
	xmlhttp.onreadystatechange = handler
	
	 xmlhttp.send();
};

function doTurnOffDevice() {
	
	xmlhttp = new XMLHttpRequest();
	var url = window.location.href + "/devices/Outlet1/off";
	xmlhttp.open("POST", url, true);
	
	xmlhttp.onreadystatechange = handler
	
	 xmlhttp.send();
	
};

</script>



</body>
</html>